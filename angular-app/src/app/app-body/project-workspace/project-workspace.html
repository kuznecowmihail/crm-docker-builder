<div class="project-workspace">
  <div class="workspace-header">
    <h2>Рабочее пространство проекта</h2>
    <div class="project-info" *ngIf="projectConfig">
      <p><strong>Название:</strong> {{ projectConfig.projectName }}</p>
      <p><strong>Путь:</strong> {{ projectConfig.projectPath }}</p>
    </div>
  </div>
  
  <div class="workspace-content">
    <div class="workspace-sidebar">
      <h3>Навигация проекта</h3>
      <mat-accordion class="project-navigation" hideToggle>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>build</mat-icon>
              Общие настройки
            </mat-panel-title>
          </mat-expansion-panel-header>
            <div class="panel-content">
              <button mat-button (click)="onSectionSelect('general')" class="nav-button">
                <mat-icon>settings</mat-icon>
                Общие настройки проекта
                <span class="unsaved-indicator" *ngIf="!projectConfig?.isSave"></span>
              </button>
            </div>
        </mat-expansion-panel>
        
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>folder</mat-icon>
              Базы данных
            </mat-panel-title>
          </mat-expansion-panel-header>
            <div class="panel-content">
              <button mat-button (click)="onSectionSelect('postgres')" class="nav-button">
                <mat-icon>storage</mat-icon>
                Postgres
                <span class="unsaved-indicator" *ngIf="!projectConfig?.postgresConfig?.isSave"></span>
              </button>
              <button mat-button (click)="onSectionSelect('pgadmin')" class="nav-button">
                <mat-icon>admin_panel_settings</mat-icon>
                PgAdmin
                <span class="unsaved-indicator" *ngIf="!projectConfig?.pgAdminConfig?.isSave"></span>
              </button>
              <button mat-button (click)="onSectionSelect('redis')" class="nav-button">
                <mat-icon>memory</mat-icon>
                Redis
                <span class="unsaved-indicator" *ngIf="!projectConfig?.redisConfig?.isSave"></span>
              </button>
            </div>
        </mat-expansion-panel>
        
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon>settings</mat-icon>
              Crm
            </mat-panel-title>
            <mat-panel-description>
              <button mat-button (click)="onCrmAdd()">
                <mat-icon>playlist_add</mat-icon>
              </button>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <div class="panel-content">
            <button *ngFor="let crm of projectConfig?.crmConfigs" mat-button (click)="onSectionSelect('crm', crm)" class="nav-button">
              <mat-icon>business</mat-icon>
              {{crm.containerName}}
              <span class="unsaved-indicator" *ngIf="!crm.isSave"></span>
            </button>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
    
    <div class="workspace-main">
      <div class="main-content">
        <!-- Общие настройки проекта -->
        <app-general-project-settings 
          *ngIf="activeSection === 'general'"
          [projectConfig]="projectConfig">
        </app-general-project-settings>
        
        <!-- Настройки PostgreSQL -->
        <app-postgres-settings 
          *ngIf="activeSection === 'postgres'"
          [projectConfig]="projectConfig">
        </app-postgres-settings>
        
        <!-- Настройки pgAdmin -->
        <app-pgadmin-settings 
          *ngIf="activeSection === 'pgadmin'"
          [projectConfig]="projectConfig">
        </app-pgadmin-settings>
        
        <!-- Настройки Redis -->
        <app-redis-settings 
          *ngIf="activeSection === 'redis'"
          [projectConfig]="projectConfig">
        </app-redis-settings>
        
        <!-- Настройки CRM -->
        <app-crm-settings 
          *ngIf="activeSection === 'crm'"
          [projectConfig]="projectConfig"
          [crmConfig]="selectedCrmConfig">
        </app-crm-settings>
        
        <!-- Заглушка для других секций -->
        <div class="section-placeholder" *ngIf="!activeSection">
          <mat-card class="placeholder-card">
            <mat-card-content>
              <div class="placeholder-content">
                <mat-icon class="placeholder-icon">dashboard</mat-icon>
                <h3>Выберите раздел</h3>
                <p>Выберите раздел в боковой панели для начала работы</p>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>
