# Electron Architecture

Этот проект использует модульную архитектуру с разделением ответственности на отдельные классы и сервисы.

## Структура проекта

```
electron/
├── main.ts                 # Точка входа приложения
├── preload.ts              # Preload скрипт для безопасного API
├── services/               # Сервисы приложения
│   ├── AppManager.ts       # Основной менеджер приложения
│   ├── WindowManager.ts    # Управление окнами
│   ├── SystemService.ts    # Системные API
│   ├── DialogService.ts    # Диалоги файлов
│   ├── NotificationService.ts # Уведомления
│   └── FileSystemService.ts # Файловая система
├── interfaces/             # Интерфейсы
│   └── IService.ts         # Базовые интерфейсы сервисов
├── types/                  # TypeScript типы
│   ├── services.d.ts       # Типы для сервисов
│   └── api.d.ts           # Типы для API
└── config/                # Конфигурация
    └── constants.ts       # Константы приложения
```

## Архитектура

### AppManager
Основной класс, который координирует работу всех сервисов:
- Инициализирует все сервисы
- Настраивает обработчики событий приложения
- Предоставляет доступ к сервисам через геттеры

### Сервисы
Каждый сервис отвечает за определенную функциональность:

#### WindowManager
- Создание и управление окнами
- Конфигурация окон
- Загрузка контента (dev/prod режимы)

#### SystemService
- Информация о системе
- Версия приложения
- Системные API

#### DialogService
- Диалоги открытия файлов
- Диалоги сохранения файлов
- Настройка фильтров

#### NotificationService
- Показ уведомлений
- Проверка поддержки уведомлений
- Настройка параметров

#### FileSystemService
- Чтение файлов
- Запись файлов
- Проверка существования файлов
- Создание директорий

### Интерфейсы
Все сервисы реализуют базовый интерфейс `IService`:
```typescript
interface IService {
  setupHandlers(): void;
}
```

### Типы
Строгая типизация для всех API и данных:
- `SystemInfo` - информация о системе
- `OpenDialogOptions` - опции диалога открытия
- `NotificationOptions` - опции уведомлений
- `SystemAPI` и `FileSystemAPI` - интерфейсы для preload

### Константы
Централизованное хранение констант:
- Конфигурация окон
- IPC каналы
- Пути к файлам
- URL для разработки

## Использование

### Инициализация
```typescript
import { AppManager } from './services/AppManager';

const appManager = new AppManager();
appManager.initialize();
```

### Доступ к сервисам
```typescript
const windowManager = appManager.getWindowManager();
const systemService = appManager.getSystemService();
const fileSystemService = appManager.getFileSystemService();
```

### Добавление нового сервиса
1. Создать класс сервиса в `services/`
2. Реализовать интерфейс `IService`
3. Добавить в `AppManager`
4. Настроить типы в `types/`
5. Добавить константы в `config/constants.ts`

## Преимущества архитектуры

1. **Модульность** - каждый сервис отвечает за свою область
2. **Тестируемость** - сервисы можно тестировать изолированно
3. **Расширяемость** - легко добавлять новые сервисы
4. **Типобезопасность** - строгая типизация TypeScript
5. **Конфигурируемость** - централизованные константы
6. **Читаемость** - четкое разделение ответственности
